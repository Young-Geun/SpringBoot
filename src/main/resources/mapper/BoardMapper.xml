<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="choi.web.springboot.repository.BoardRepository">

    <select id="selectCount" resultType="int">
        SELECT COUNT(1)
        FROM board
    </select>

    <select id="selectAll" resultType="choi.web.springboot.domain.Board" parameterType="int">
        SELECT *
        FROM (
                 SELECT ROWNUM rowno,
                        a.*
                 FROM (
                          SELECT board_id,
                                 title,
                                 contents,
                                 reg_id,
                                 (SELECT member_name FROM member WHERE member_id = reg_id) reg_name,
                                 reg_date
                          FROM board
                          ORDER BY board_id DESC
                      ) a
             )
        WHERE rowno <![CDATA[ > ]]> (#{currentPage} - 1) * 10
        AND rowno <![CDATA[ <= ]]> (#{currentPage} * 10)
    </select>

</mapper>